---
title: Templates
description: "Manage and send Lettr templates with the PHP SDK"
---

Lettr templates let you manage email designs in the Lettr dashboard while your application provides the dynamic data.

## Sending with Templates

The simplest way to send a template email:

```php
$response = $lettr->emails()->sendTemplate(
    from: 'sender@yourdomain.com',
    to: 'user@example.com',
    subject: 'Welcome!',
    templateSlug: 'welcome-email',
    substitutionData: [
        'first_name' => 'John',
        'activation_url' => 'https://example.com/activate/abc123',
    ],
);
```

The array keys correspond to merge tags in your template (e.g., `{{first_name}}`).

## Template Versioning

Specify a template version to use a specific iteration:

```php
$response = $lettr->emails()->sendTemplate(
    from: 'sender@yourdomain.com',
    to: 'user@example.com',
    subject: 'Welcome!',
    templateSlug: 'welcome-email',
    templateVersion: 2,
    substitutionData: ['first_name' => 'John'],
);
```

Omit the version to use the active (published) version.

## Working with Projects

If you have multiple projects in Lettr, specify the project ID:

```php
$response = $lettr->emails()->sendTemplate(
    from: 'sender@yourdomain.com',
    to: 'user@example.com',
    subject: 'Welcome!',
    templateSlug: 'welcome-email',
    projectId: 123,
    substitutionData: ['first_name' => 'John'],
);
```

## Using the Builder

For more control, use the email builder with templates:

```php
$response = $lettr->emails()->send(
    $lettr->emails()->create()
        ->from('sender@yourdomain.com')
        ->to(['recipient@example.com'])
        ->subject('Your Order #{{order_id}}')
        ->useTemplate('order-confirmation', version: 1, projectId: 123)
        ->substitutionData([
            'order_id' => '12345',
            'customer_name' => 'John Doe',
            'items' => [
                ['name' => 'Product A', 'price' => 29.99],
                ['name' => 'Product B', 'price' => 49.99],
            ],
            'total' => 79.98,
        ])
);
```

## Listing Templates

Retrieve available templates via the API:

```php
use Lettr\Dto\Template\ListTemplatesFilter;

$response = $lettr->templates()->list();

foreach ($response->templates as $template) {
    echo $template->name . ' (' . $template->slug . ')';
}

// With pagination and filtering
$filter = ListTemplatesFilter::create()
    ->projectId(123)
    ->perPage(20)
    ->page(2);

$response = $lettr->templates()->list($filter);
```

## Get Template Details

```php
$template = $lettr->templates()->get('welcome-email');

echo $template->name;
echo $template->slug;
echo $template->html;
echo $template->activeVersion;
echo $template->versionsCount;

// With specific project
$template = $lettr->templates()->get('welcome-email', projectId: 123);
```

## Get Merge Tags

Retrieve merge tags (template variables) from a template:

```php
$response = $lettr->templates()->getMergeTags('welcome-email');

foreach ($response->mergeTags as $tag) {
    echo $tag->key;       // e.g., 'user_name'
    echo $tag->required;  // true/false
    echo $tag->type;      // e.g., 'string', 'object'

    // Nested tags (for objects)
    if ($tag->children !== null) {
        foreach ($tag->children as $child) {
            echo $child->key;
            echo $child->type;
        }
    }
}

// With specific project and version
$response = $lettr->templates()->getMergeTags(
    'welcome-email',
    projectId: 123,
    version: 2,
);
```

## Create a Template

```php
use Lettr\Dto\Template\CreateTemplateData;

$template = $lettr->templates()->create(new CreateTemplateData(
    name: 'My Template',
    slug: 'my-template',
    projectId: 123,
    html: '<html>...</html>',
));

echo $template->id;
echo $template->slug;
```

## Delete a Template

```php
$lettr->templates()->delete('my-template');

// With specific project
$lettr->templates()->delete('my-template', projectId: 123);
```
