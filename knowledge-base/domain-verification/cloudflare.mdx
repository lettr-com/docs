---
title: Cloudflare
description: "Verify your domain on Cloudflare with Lettr"
---

# Cloudflare

This guide walks you through adding DNS records on Cloudflare to verify your domain with Lettr.

<Tip>
  It is best practice to use a subdomain (e.g., `sender.example.com`) instead of the root domain. Using a subdomain allows for proper reputation segmentation and is especially important if receiving emails with Lettr.
</Tip>

## Add Domain to Lettr

Log in to your [Lettr Dashboard](https://app.lettr.com), go to **Domains**, open the tab for your domain type (e.g. **Sending Domains**), and click **+ New Sending Domain** (or **+ New Tracking Domain**, **+ New Inbound Domain**, **+ New Storage Domain**). Enter your domain name.

## Log in to Cloudflare

Log in to your [Cloudflare account](https://dash.cloudflare.com) and select your domain. Navigate to the **DNS** section to manage DNS records.

---

## Sending Domain Setup

Choose one of the following options based on whether you're using a subdomain or primary domain.

### Option 1: Subdomain (CNAME Verification)

If you're setting up a subdomain like `sender.example.com`, add the following records:

#### Bounce Domain CNAME

1. Click **Add Record**
2. Set the **Type** to `CNAME`
3. Enter `sender` for the **Name** (or your chosen subdomain)
4. Enter `sparkpostmail.com` for the **Target**
5. Set **Proxy status** to `DNS only` (gray cloud)
6. Click **Save**

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `CNAME` |
| Name | Host | `sender` |
| Target | Value | `sparkpostmail.com` |
| Proxy status | - | `DNS only` |

<Warning>
  Make sure the proxy status is set to **DNS only** (gray cloud icon). Cloudflare proxy (orange cloud) will interfere with email verification.
</Warning>

### Option 2: Primary Domain (TXT SPF Verification)

If you're using your root domain `example.com`, add an SPF record:

#### SPF Record

1. Click **Add Record**
2. Set the **Type** to `TXT`
3. Enter `@` for the **Name** (root domain)
4. Enter `v=spf1 include:_spf.sparkpostmail.com ~all` for the **Content**
5. Click **Save**

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `TXT` |
| Name | Host | `@` |
| Content | Value | `v=spf1 include:_spf.sparkpostmail.com ~all` |

<Info>
  If you already have an SPF record, merge Lettr's include with your existing record. For example: `v=spf1 include:_spf.sparkpostmail.com include:_spf.google.com ~all`
</Info>

### DKIM Record (Required for All Sending Domains)

1. Click **Add Record**
2. Set the **Type** to `TXT`
3. Copy the **Name** from your Lettr dashboard (e.g., `scph0226._domainkey.sender`)
4. Copy the **Value** from your Lettr dashboard (starts with `v=DKIM1;k=rsa;...`)
5. Click **Save**

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `TXT` |
| Name | Host | `scph0226._domainkey.sender` |
| Content | Value | `v=DKIM1;k=rsa;h=sha256;p=MIGfMA0...` |

<Info>
  The DKIM hostname and value are unique to your domain. Copy them exactly from your Lettr dashboard.
</Info>

### DMARC Record (Required for All Sending Domains)

1. Click **Add Record**
2. Set the **Type** to `TXT`
3. Enter `_dmarc.sender` for the **Name** (replace `sender` with your subdomain, or use `_dmarc` for root domain)
4. Enter `v=DMARC1;p=none;` for the **Content**
5. Click **Save**

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `TXT` |
| Name | Host | `_dmarc.sender` |
| Content | Value | `v=DMARC1;p=none;` |

---

## Tracking Domain Setup

To set up a custom tracking domain like `click.sender.example.com`, add two CNAME records:

### SSL Certificate CNAME

1. Click **Add Record**
2. Set the **Type** to `CNAME`
3. Copy the **Name** from your Lettr dashboard (e.g., `_acme-challenge.click.sender`)
4. Copy the **Target** from your Lettr dashboard
5. Set **Proxy status** to `DNS only`
6. Click **Save**

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `CNAME` |
| Name | Host | `_acme-challenge.click.sender` |
| Target | Value | (provided in dashboard) |
| Proxy status | - | `DNS only` |

### Traffic CNAME

1. Click **Add Record**
2. Set the **Type** to `CNAME`
3. Enter your tracking subdomain for the **Name** (e.g., `click.sender`)
4. Enter `proxy.lettr-tracking.com` for the **Target**
5. Set **Proxy status** to `DNS only`
6. Click **Save**

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `CNAME` |
| Name | Host | `click.sender` |
| Target | Value | `proxy.lettr-tracking.com` |
| Proxy status | - | `DNS only` |

<Tip>
  SSL certificates are automatically generated and renewed by Lettr. All tracking URLs use HTTPS.
</Tip>

---

## Inbound Domain Setup

To receive emails at your domain, add MX records:

1. Click **Add Record**
2. Set the **Type** to `MX`
3. Enter `inbound` for the **Name** (or your chosen subdomain)
4. Enter `rx1.sparkpostmail.com` for the **Mail Server**
5. Enter `10` for the **Priority**
6. Click **Save**

Repeat for the other two MX records:

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `MX` |
| Name | Host | `inbound` |
| Mail Server | Value | `rx1.sparkpostmail.com` |
| Priority | Priority | `10` |

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `MX` |
| Name | Host | `inbound` |
| Mail Server | Value | `rx2.sparkpostmail.com` |
| Priority | Priority | `10` |

| Cloudflare | Lettr | Example Value |
|------------|-------|---------------|
| Type | Type | `MX` |
| Name | Host | `inbound` |
| Mail Server | Value | `rx3.sparkpostmail.com` |
| Priority | Priority | `10` |

<Warning>
  When you configure MX records, all emails sent to that domain/subdomain will be routed to Lettr. We recommend using a subdomain like `inbound.example.com` to avoid interfering with your existing email service.
</Warning>

---

## Complete Verification

Return to your Lettr dashboard and click **Verify**. Cloudflare typically propagates DNS changes within 1-5 minutes.

## Troubleshooting

<AccordionGroup>
  <Accordion title="CNAME verification failing">
    Ensure the **Proxy status** is set to `DNS only` (gray cloud). Orange cloud proxy mode interferes with email verification.
  </Accordion>
  <Accordion title="Records not detected after 24 hours">
    Double-check record values for typos. Use [WhatsMyDNS](https://www.whatsmydns.net/) to verify DNS propagation.
  </Accordion>
  <Accordion title="SPF record conflicts">
    You can only have one SPF record per domain. Merge multiple includes into a single record.
  </Accordion>
</AccordionGroup>
