---
title: "Google Cloud DNS"
description: "Step-by-step guide to configuring DNS records for Lettr on Google Cloud DNS."
---

This guide walks you through adding the required DNS records for Lettr using Google Cloud DNS. Google Cloud DNS is a fast, reliable, and cost-effective domain name system managed through the [Google Cloud Console](https://console.cloud.google.com).

You will configure a **sending domain** (CNAME, DKIM TXT, and DMARC TXT records) and, optionally, an **inbound domain** (MX records), **tracking domain** (two CNAME records), and **storage domain** (CNAME and two TXT records).

---

## Sending Domain Setup

A sending domain authenticates your outgoing emails with DKIM and DMARC, ensuring they are delivered reliably and not marked as spam. This requires a CNAME record for domain verification, a TXT record for DKIM signing, and a TXT record for DMARC policy.

To create a sending domain in Lettr:
1. Select **Domains** in the navigation panel
2. Select **Sending Domains**
3. Click **Create Sending Domain**
4. Enter your desired sending subdomain (e.g. `mailing.company.com`)
5. Click **Create Domain**

<img src="/images/lettr-create-sending-domain.png" alt="Create Sending Domain button in Lettr" />

<Tip>
  Use a subdomain (e.g. `mailing.company.com`) instead of the root domain (`company.com`). A subdomain provides proper
  reputation segmentation and is required if you also plan to receive emails with Lettr.
</Tip>

Click your new domain in the Sending Domains list.

<img src="/images/lettr-sending-list.png" alt="Sending domain listed in Lettr Sending Domains list" />

This will display a list of DNS records that need to be configured. Keep this page open — you will need these values soon.

<img src="/images/lettr-mailing-config.png" alt="DNS records displayed in Lettr after creating a sending domain" />

### Configure Google Cloud DNS

Log in to the [Google Cloud Console](https://console.cloud.google.com) and navigate to **Cloud DNS** in the left-hand menu. Select the managed zone that corresponds to your domain.

{/* TODO: Add screenshot of Google Cloud DNS managed zones list */}

<Tip>
  If your domain was purchased through Google Cloud or your nameservers already point to Google Cloud DNS, skip nameserver
  configuration entirely. Your domain is already using Google Cloud DNS's nameservers by default — proceed directly to adding the
  DNS records below.
</Tip>

<AccordionGroup>
  <Accordion title="Domain registered with a different registrar?">
    If you registered your domain elsewhere but want to manage DNS on Google Cloud DNS, you must first create a managed zone
    and then **update the nameservers** at your registrar to the nameservers assigned to your managed zone.

    <Warning>Until the nameservers are updated, any records you add in Google Cloud DNS will not resolve.</Warning>
  </Accordion>
</AccordionGroup>

{/* TODO: Add screenshot of Google Cloud DNS nameserver configuration inside the accordion above */}

### Add CNAME Record

The CNAME record verifies domain ownership with Lettr's email infrastructure.

Add the record in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix). For example, paste only `mailing`.
3. Set **Type** to **CNAME**.
4. Set **TTL** to **300** (or your preferred value).
5. Set **Canonical name** to the **Value** from Lettr, ensuring it ends with a trailing period (e.g. `sparkpostmail.com.`).
6. Click **Save**.

<img src="/images/lettr-mailing-1.png" alt="CNAME record Hostname and Value in Lettr" />

{/* TODO: Add screenshot of gcloud-sending-1.png */}

<Info>
  Google Cloud DNS requires trailing periods on CNAME and MX target values. If the value from Lettr does not end with a
  period, add one manually (e.g. `sparkpostmail.com.`).
</Info>

### Add TXT Record (DKIM)

The DKIM record adds a cryptographic signature to your outgoing emails, allowing recipients to verify they were sent by an authorized sender.

Add the record in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix). For example, paste only `scph0126._domainkey.mailing`.
3. Set **Type** to **TXT**.
4. Set **TTL** to **300** (or your preferred value).
5. Set the **Text data** to the **Value** from Lettr, enclosed in double quotes.
6. Click **Save**.

<img src="/images/lettr-mailing-2.png" alt="DKIM TXT record Hostname and Value in Lettr" />

{/* TODO: Add screenshot of gcloud-sending-2.png */}

<Info>
  DKIM values are long strings. Google Cloud DNS supports long TXT values, but if you encounter issues, try splitting the
  value into multiple quoted strings (e.g. `"part1" "part2"`). Google Cloud DNS will concatenate them automatically.
</Info>

### Add TXT Record (DMARC)

The DMARC record tells receiving mail servers how to handle emails that fail authentication checks, protecting your domain from spoofing.

Add the record in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix). For example, paste only `_dmarc.mailing`.
3. Set **Type** to **TXT**.
4. Set **TTL** to **300** (or your preferred value).
5. Set the **Text data** to the **Value** from Lettr, enclosed in double quotes (e.g. `"v=DMARC1;p=none;"`).
6. Click **Save**.

<img src="/images/lettr-mailing-3.png" alt="DMARC TXT record Hostname and Value in Lettr" />

{/* TODO: Add screenshot of gcloud-sending-3.png */}

### Verify Your Sending Domain

After adding all three DNS records, go back to Lettr and click **Verify DNS Records**. DNS propagation can take up to 24–48 hours, though it typically completes within a few minutes.

<img src="/images/lettr-verified.png" alt="Sending domain verified successfully in Lettr" />

---

## Inbound Domain Setup

An inbound domain allows Lettr to receive emails on your behalf. This requires three MX records that direct incoming mail to Lettr's mail servers.

### Add Inbound Domain to Lettr

To create an Inbound domain in Lettr:
1. Select **Domains** in the navigation panel
2. Select **Inbound Domains**
3. Click **Create Inbound Domain**
4. Enter your desired inbound subdomain (e.g. `inbound.company.com`)
5. Click **Create Domain**.

<img src="/images/lettr-inbound-new.png" alt="Creating a new inbound domain in Lettr" />

Click on your new domain in the Inbound Domains list.

<img src="/images/lettr-inbound-list.png" alt="Inbound domain listed in Lettr Inbound Domains list" />

This will display the MX records that need to be configured.

<img src="/images/lettr-inbound-config.png" alt="MX record configuration displayed in Lettr for inbound domain" />

### Add MX Records

MX records tell other mail servers where to deliver emails addressed to your domain.

Add the MX record set in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix). For example, paste only `inbound`.
3. Set **Type** to **MX**.
4. Set **TTL** to **300** (or your preferred value).
5. Add three rows in the **MX data** field:
   - `10 rx1.sparkpostmail.com.`
   - `10 rx2.sparkpostmail.com.`
   - `10 rx3.sparkpostmail.com.`
6. Click **Save**.

<img src="/images/lettr-inbound-1.png" alt="MX record values in Lettr for inbound domain" />

{/* TODO: Add screenshot of gcloud-inbound-1.png */}

<Warning>
  Adding MX records to a domain or subdomain will route all incoming email for that address to Lettr. Use a dedicated
  subdomain (e.g. `inbound.company.com`) to avoid affecting your primary email.
</Warning>

### Verify Your Inbound Domain

After adding all three MX records, go back to Lettr and click **Verify DNS Records**. DNS propagation can take up to 24–48 hours, though it typically completes within a few minutes.

<img src="/images/lettr-inbound-verified.png" alt="Inbound domain verified successfully in Lettr" />

---

## Tracking Domain Setup

A tracking domain allows Lettr to track email opens and link clicks using your own custom domain instead of the default Lettr tracking domain. This requires two CNAME records: one for the SSL certificate and one for routing tracking traffic to Lettr's infrastructure.

### Add Tracking Domain to Lettr

To create a Tracking domain in Lettr:
1. Select **Domains** in the navigation panel
2. Select **Tracking Domains**
3. Click **Create Tracking Domain**
4. Enter your desired tracking subdomain (e.g. `tracking.company.com`)
5. Click **Create Domain**

<img src="/images/lettr-add-tracking.png" alt="Creating a new tracking domain in Lettr" />

Click on your new domain in the Tracking Domains list.

<img src="/images/lettr-tracking-list.png" alt="Tracking domain listed in Lettr Tracking Domains list" />

This will display the CNAME records that need to be configured.

<img src="/images/lettr-tracking-config.png" alt="CNAME records displayed in Lettr for tracking domain configuration" />

### Add SSL Certificate CNAME Record

The SSL Certificate CNAME record provisions an SSL certificate for your custom tracking domain, enabling secure HTTPS connections for tracked links.

Add the record in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix).
3. Set **Type** to **CNAME**.
4. Set **Canonical name** to the **Value** from Lettr, with a trailing period.
5. Click **Save**.

<img src="/images/lettr-tracking-1.png" alt="SSL Certificate CNAME record values in Lettr for tracking domain" />

{/* TODO: Add screenshot of gcloud-tracking-1.png */}

### Add Traffic CNAME Record

The Traffic CNAME record routes click and open tracking requests from your custom domain to Lettr's tracking servers.

Add the record in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix).
3. Set **Type** to **CNAME**.
4. Set **Canonical name** to the **Value** from Lettr, with a trailing period.
5. Click **Save**.

<img src="/images/lettr-tracking-2.png" alt="Traffic CNAME record values in Lettr for tracking domain" />

{/* TODO: Add screenshot of gcloud-tracking-2.png */}

### Verify Your Tracking Domain

After adding both CNAME records, go back to Lettr and click **Verify DNS Records**.

<img src="/images/lettr-tracking-verified.png" alt="Tracking domain verified successfully in Lettr" />

---

## Storage Domain Setup

A storage domain lets you serve email assets (images, attachments) from your own custom domain instead of the default Lettr storage URL. This requires two TXT records for certificate validation and ownership verification, and a CNAME record for routing asset requests to Lettr's storage infrastructure.

### Add Storage Domain to Lettr

To create a Storage domain in Lettr:
1. Select **Domains** in the navigation panel
2. Select **Storage Domains**
3. Click **Create Storage Domain**
4. Enter your desired storage subdomain (e.g. `assets.company.com`)
5. Click **Create Domain**

<img src="/images/lettr-storage-new.png" alt="Creating a new storage domain in Lettr" />

Click on your new domain in the Storage Domains list.

<img src="/images/lettr-storage-list.png" alt="Storage domain listed in Lettr Storage Domains list" />

This will display the TXT and CNAME records that need to be configured.

<img src="/images/lettr-storage-config.png" alt="TXT and CNAME records displayed in Lettr for storage domain configuration" />

### Add TXT Record (Certificate Validation)

The Certificate Validation TXT record provisions an SSL certificate for your custom storage domain, enabling secure HTTPS delivery of email assets.

Add the record in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix).
3. Set **Type** to **TXT**.
4. Set the **Text data** to the **Value** from Lettr, enclosed in double quotes.
5. Click **Save**.

<img src="/images/lettr-storage-1.png" alt="Certificate Validation TXT record values in Lettr for storage domain" />

{/* TODO: Add screenshot of gcloud-storage-1.png */}

### Add TXT Record (Hostname Pre-validation)

The Hostname Pre-validation TXT record verifies ownership of the storage domain before Lettr provisions a custom hostname for it.

Add the record in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix).
3. Set **Type** to **TXT**.
4. Set the **Text data** to the **Value** from Lettr, enclosed in double quotes.
5. Click **Save**.

<img src="/images/lettr-storage-2.png" alt="Hostname Pre-validation TXT record values in Lettr for storage domain" />

{/* TODO: Add screenshot of gcloud-storage-2.png */}

### Add CNAME Record (Domain Routing)

The Domain Routing CNAME record routes asset requests from your custom domain to Lettr's storage infrastructure.

Add the record in Google Cloud DNS:

1. Click **Add record set** in your managed zone.
2. Set **Name** to the **Hostname** from Lettr (without your domain suffix).
3. Set **Type** to **CNAME**.
4. Set **Canonical name** to the **Value** from Lettr, with a trailing period.
5. Click **Save**.

<img src="/images/lettr-storage-3.png" alt="Domain Routing CNAME record values in Lettr for storage domain" />

{/* TODO: Add screenshot of gcloud-storage-3.png */}

### Verify Your Storage Domain

After adding all three records, go back to Lettr and click **Verify DNS Records**.

<img src="/images/lettr-storage-verified.png" alt="Storage domain verified successfully in Lettr" />

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="Missing Trailing Period">
    Google Cloud DNS requires trailing periods on CNAME and MX target values. If your records are not resolving, check that
    each CNAME canonical name and MX exchange ends with a period (e.g. `sparkpostmail.com.` not `sparkpostmail.com`). Edit the
    record set and add the trailing period if it is missing.
  </Accordion>
  <Accordion title="Records Not Propagating">
    Google Cloud DNS typically propagates within 5–15 minutes. If verification fails after adding records, check the
    following:

    - **Wait at least 30 minutes** before your first verification attempt.
    - **Confirm the records exist** using command-line tools:

    ```bash
    # Check CNAME record
    dig CNAME mailing.yourdomain.com +short

    # Check DKIM record
    dig TXT scph0126._domainkey.mailing.yourdomain.com +short

    # Check DMARC record
    dig TXT _dmarc.mailing.yourdomain.com +short

    # Check MX records (inbound)
    dig MX inbound.yourdomain.com +short

    # Check tracking domain CNAME
    dig CNAME track.yourdomain.com +short

    # Check storage domain CNAME
    dig CNAME assets.yourdomain.com +short
    ```

    - **Use a web tool** like [dnschecker.org](https://dnschecker.org) to verify propagation across multiple DNS servers worldwide.

    Alternatively, you can use the `gcloud` CLI to verify records directly:

    ```bash
    gcloud dns record-sets list YOUR_ZONE_NAME --filter="name=mailing.yourdomain.com."
    ```
  </Accordion>
  <Accordion title="DKIM Value Too Long">
    The DKIM TXT value is a long string. Google Cloud DNS supports splitting long TXT values into multiple quoted strings.
    If you encounter an error when saving, try splitting the value:

    ```
    "first255characters..." "remaining characters..."
    ```

    Google Cloud DNS will concatenate the strings automatically when the record is queried.
  </Accordion>
  <Accordion title="Wrong Record Type">
    A common mistake is selecting the wrong record type:

    | Record | Correct Type |
    |--------|-------------|
    | Sending verification | CNAME |
    | DKIM | TXT |
    | DMARC | TXT |
    | Inbound mail | MX |
    | Tracking SSL certificate | CNAME |
    | Tracking traffic | CNAME |
    | Storage certificate validation | TXT |
    | Storage hostname pre-validation | TXT |
    | Storage domain routing | CNAME |
  </Accordion>
  <Accordion title="Nameservers Not Pointing to Google Cloud">
    If your records are saved in Google Cloud DNS but not resolving, confirm that your domain registrar is pointing to the
    nameservers assigned to your managed zone. You can check this with:

    ```bash
    dig NS yourdomain.com +short
    ```

    The output should include the four nameservers shown in your managed zone overview (e.g. `ns1.google.com`,
    `ns2.google.com`). If it shows a different provider's nameservers, update them at your domain registrar.
  </Accordion>
  <Accordion title="When to Contact Support">
    If your DNS records are correctly configured (confirmed with `dig` or dnschecker.org) and verification still fails after
    48 hours, contact Lettr support at **support@lettr.com** or through the in-app chat. Include your domain name and the
    output of the `dig` commands above.
  </Accordion>
</AccordionGroup>

---

## Related Topics

<CardGroup cols={2}>
  <Card title="Sending Domains" icon="paper-plane" href="/learn/domains/sending-domains">
    Learn about sending domain setup, SPF, DKIM, and DMARC.
  </Card>
  <Card title="Inbound Domains" icon="inbox" href="/learn/domains/inbound-domains">
    Configure MX records to receive emails with Lettr.
  </Card>
  <Card title="Tracking Domains" icon="link" href="/learn/domains/tracking-domains">
    Set up a custom tracking domain for click and open tracking.
  </Card>
  <Card title="Storage Domains" icon="hard-drive" href="/learn/domains/storage-domains">
    Serve email assets from your own custom domain.
  </Card>
  <Card title="Domains Overview" icon="globe" href="/learn/domains/introduction">
    Understand domain types and how they work in Lettr.
  </Card>
  <Card
    title="Domain Verification Failures"
    icon="circle-exclamation"
    href="/knowledge-base/troubleshooting/domain-verification">
    Troubleshoot common DNS configuration and propagation issues.
  </Card>
</CardGroup>
