---
title: DMARC
description: "Configure DMARC for email authentication and protect your domain from spoofing"
---

# DMARC (Domain-based Message Authentication, Reporting, and Conformance)

DMARC is an email authentication protocol that builds on SPF and DKIM to protect your domain from email spoofing. It tells receiving email servers what to do when emails claiming to be from your domain fail authentication checks.

<Info>
  Need help managing your DMARC policy? Check out [DMARCeye.com](https://dmarceye.com) - our dedicated DMARC monitoring and reporting service that helps you analyze reports, identify issues, and safely enforce your DMARC policy.
</Info>

## How DMARC Works

1. You publish a DMARC policy in your domain's DNS
2. Receiving servers check if emails pass SPF and/or DKIM
3. They also verify that the domains in SPF/DKIM align with the `From:` domain
4. Based on your policy, failing emails are accepted, quarantined, or rejected
5. Receiving servers send aggregate reports about authentication results

```
                                        ┌─────────────┐
┌──────────┐      ┌──────────────┐      │ DMARC Check │
│  Email   │ ───▶ │  Recipient   │ ───▶ │ SPF Pass?   │
│  Sent    │      │   Server     │      │ DKIM Pass?  │
└──────────┘      └──────────────┘      │ Aligned?    │
                                        └──────┬──────┘
                                               │
                         ┌─────────────────────┼─────────────────────┐
                         ▼                     ▼                     ▼
                   ┌──────────┐          ┌──────────┐          ┌──────────┐
                   │  Accept  │          │Quarantine│          │  Reject  │
                   │  (p=none)│          │(p=quaran │          │(p=reject)│
                   └──────────┘          │   tine)  │          └──────────┘
                                         └──────────┘
```

## DMARC Policies

Your DMARC policy determines how receiving servers handle emails that fail authentication:

| Policy | Action | Use Case |
|--------|--------|----------|
| `p=none` | Monitor only, no action | Initial setup, gathering data |
| `p=quarantine` | Send to spam folder | Transitioning to enforcement |
| `p=reject` | Block the email entirely | Full protection |

<Warning>
  Don't start with `p=reject`. Begin with `p=none` to monitor your email flows, identify issues, and ensure all legitimate sending sources are authenticated.
</Warning>

## Setting Up DMARC

Add a TXT record to your domain's DNS:

```
Type:  TXT
Host:  _dmarc
Value: v=DMARC1;p=none;
```

You can optionally add `rua=mailto:dmarc@example.com` to receive aggregate reports (see [DMARC Reports](#dmarc-reports)).

## DMARC Record Components

```
v=DMARC1;                              # Version (required)
p=none;                                # Policy (required)
rua=mailto:dmarc@example.com;          # Aggregate report address
ruf=mailto:forensic@example.com;       # Forensic report address
pct=100;                               # Percentage of messages to apply policy
adkim=r;                               # DKIM alignment mode
aspf=r;                                # SPF alignment mode
sp=none;                               # Subdomain policy
```

### Parameter Reference

| Parameter | Description | Values |
|-----------|-------------|--------|
| `v` | DMARC version (required) | `DMARC1` |
| `p` | Policy for domain (required) | `none`, `quarantine`, `reject` |
| `rua` | Aggregate report email | `mailto:address@example.com` |
| `ruf` | Forensic report email | `mailto:address@example.com` |
| `pct` | Percentage to apply policy | `1` - `100` (default: 100) |
| `adkim` | DKIM alignment mode | `r` (relaxed), `s` (strict) |
| `aspf` | SPF alignment mode | `r` (relaxed), `s` (strict) |
| `sp` | Subdomain policy | `none`, `quarantine`, `reject` |

## DMARC Alignment

For DMARC to pass, either SPF or DKIM must both pass **and** align with the `From:` domain.

### Relaxed vs Strict Alignment

| Mode | SPF Alignment | DKIM Alignment |
|------|---------------|----------------|
| Relaxed (`r`) | Return-Path domain can be a subdomain of From domain | DKIM `d=` can be a subdomain of From domain |
| Strict (`s`) | Return-Path domain must exactly match From domain | DKIM `d=` must exactly match From domain |

**Example with relaxed alignment:**

```
From: hello@example.com
Return-Path: bounce.example.com    ✓ Aligned (subdomain of example.com)
DKIM d=mail.example.com            ✓ Aligned (subdomain of example.com)
```

<Tip>
  Lettr automatically configures SPF and DKIM to align with your sending domain, ensuring DMARC compliance.
</Tip>

## Recommended Rollout

A safe DMARC rollout typically takes 4-8 weeks:

<Steps>
  <Step title="Monitor (2-4 weeks)">
    Start with `p=none` to collect reports without affecting delivery.

    ```
    v=DMARC1; p=none; rua=mailto:dmarc@example.com
    ```

    Analyze reports to identify all legitimate sending sources and fix authentication issues.
  </Step>
  <Step title="Quarantine with Low Percentage (1-2 weeks)">
    Move to `p=quarantine` with a low percentage to start filtering.

    ```
    v=DMARC1; p=quarantine; pct=10; rua=mailto:dmarc@example.com
    ```

    Gradually increase `pct` as you confirm no legitimate emails are affected.
  </Step>
  <Step title="Full Quarantine (1-2 weeks)">
    Increase to 100% quarantine.

    ```
    v=DMARC1; p=quarantine; pct=100; rua=mailto:dmarc@example.com
    ```

    Monitor for any issues before moving to reject.
  </Step>
  <Step title="Reject">
    Finally, move to `p=reject` for full protection.

    ```
    v=DMARC1; p=reject; rua=mailto:dmarc@example.com
    ```
  </Step>
</Steps>

## DMARC Reports

DMARC reports help you understand who's sending email using your domain and whether they're passing authentication.

### Aggregate Reports (RUA)

XML reports sent daily containing:

- Source IPs sending email for your domain
- Authentication results (SPF/DKIM pass/fail)
- Number of messages from each source
- Policy applied to messages

### Forensic Reports (RUF)

Individual failure reports containing:

- Full headers of failed emails
- Body samples (if configured)
- Detailed authentication results

<Note>
  Many mailbox providers have stopped sending forensic reports due to privacy concerns. Aggregate reports are more reliable.
</Note>

## Monitoring DMARC with DMARCeye

Parsing raw DMARC XML reports is complex. [DMARCeye.com](https://dmarceye.com) simplifies this by:

- **Visualizing Reports** - See authentication results in easy-to-understand dashboards
- **Identifying Sources** - Discover all services sending email as your domain
- **Alerting Issues** - Get notified when authentication failures spike
- **Recommending Actions** - Receive guidance on moving from `p=none` to `p=reject`
- **Historical Analysis** - Track your domain's authentication trends over time

To use DMARCeye, update your DMARC record with their reporting address:

```
v=DMARC1; p=none; rua=mailto:your-id@rua.dmarceye.com
```

## Lettr DMARC Compliance

Lettr automatically ensures DMARC compliance for your sending domains:

- **SPF Alignment** - Return-Path domain aligns with your sending domain
- **DKIM Alignment** - Emails are signed with your domain's DKIM key
- **Consistent Authentication** - Both SPF and DKIM pass for all emails

## Troubleshooting

| Issue | Solution |
|-------|----------|
| DMARC not verifying | Ensure TXT record is at `_dmarc.yourdomain.com` |
| DMARC failing despite SPF/DKIM pass | Check alignment - domains must match |
| Not receiving reports | Verify email in `rua` is correct and can receive email |
| Legitimate emails rejected | Lower `pct` or move back to `quarantine`/`none` |

## Common Mistakes

1. **Starting with `p=reject`** - Always start with `p=none` to avoid blocking legitimate emails
2. **Ignoring reports** - Regularly analyze DMARC reports to catch issues early
3. **Forgetting subdomains** - Use `sp=` to set policy for subdomains, or they inherit from parent
4. **Multiple DMARC records** - Only one DMARC record is allowed per domain

## Next Steps

<CardGroup cols={2}>
  <Card title="BIMI" icon="image" href="/learn/domains/bimi">
    Display your brand logo in email clients (requires DMARC enforcement)
  </Card>
  <Card title="DMARCeye" icon="eye" href="https://dmarceye.com">
    Monitor and analyze your DMARC reports
  </Card>
</CardGroup>
