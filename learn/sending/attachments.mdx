---
title: Attachments
description: "Add file attachments to your emails"
---

# Email Attachments

Many transactional emails need to include files — invoices after a purchase, receipts for payments, reports generated on demand, or contracts that need a signature. Lettr supports both inline content (base64-encoded) and URL-based attachments, so you can attach files regardless of where they originate.

## Basic Attachment

Attach files using base64-encoded content:

```javascript
import fs from 'fs';

const fileContent = fs.readFileSync('invoice.pdf');
const base64Content = fileContent.toString('base64');

await lettr.emails.send({
  from: 'you@example.com',
  to: ['recipient@example.com'],
  subject: 'Your Invoice',
  html: '<p>Please find your invoice attached.</p>',
  attachments: [
    {
      filename: 'invoice.pdf',
      content: base64Content,
      contentType: 'application/pdf'
    }
  ]
});
```

## Multiple Attachments

```javascript
await lettr.emails.send({
  from: 'you@example.com',
  to: ['recipient@example.com'],
  subject: 'Project Files',
  html: '<p>Here are the requested files.</p>',
  attachments: [
    {
      filename: 'report.pdf',
      content: reportBase64,
      contentType: 'application/pdf'
    },
    {
      filename: 'data.xlsx',
      content: excelBase64,
      contentType: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
    },
    {
      filename: 'image.png',
      content: imageBase64,
      contentType: 'image/png'
    }
  ]
});
```

## URL-Based Attachments

Attach files from a URL (Lettr will fetch and attach them):

```javascript
await lettr.emails.send({
  from: 'you@example.com',
  to: ['recipient@example.com'],
  subject: 'Your Document',
  html: '<p>Document attached.</p>',
  attachments: [
    {
      filename: 'document.pdf',
      url: 'https://example.com/files/document.pdf'
    }
  ]
});
```

## Inline Images

Embed images directly in your email HTML:

```javascript
await lettr.emails.send({
  from: 'you@example.com',
  to: ['recipient@example.com'],
  subject: 'Email with Image',
  html: '<p>Check out this image:</p><img src="cid:logo" />',
  attachments: [
    {
      filename: 'logo.png',
      content: logoBase64,
      contentType: 'image/png',
      cid: 'logo' // Content-ID for inline reference
    }
  ]
});
```

## Attachment Limits

| Limit | Value |
|-------|-------|
| Max attachment size | 25 MB |
| Max total email size | 30 MB |
| Max attachments per email | 10 |

<Warning>
  Large attachments can affect deliverability and may be blocked by recipient email servers. Consider using download links for files over 10 MB.
</Warning>

## Attachments vs. Download Links

Not every file belongs as an attachment. Consider which approach fits your use case:

| Factor | Attachment | Download Link |
|--------|-----------|---------------|
| **File size** | Best for files under 10 MB | Better for large files |
| **Offline access** | Recipient has the file immediately | Requires internet to download |
| **Deliverability** | Large attachments may be blocked | No impact on email delivery |
| **Tracking** | No download tracking | Can track link clicks |
| **Expiration** | File persists in recipient's inbox | Link can expire for security |

**Use attachments for:** invoices, receipts, tickets, and small documents the recipient needs to keep.

**Use download links for:** large reports, media files, archives, and files that should expire after a set period.

## Base64 vs. URL-Based Attachments

Lettr supports two ways to include attachments:

**Base64 (inline content)** — You encode the file and include it directly in the API request. Use this when the file is generated dynamically (e.g., a PDF invoice created at send time) or when the file isn't hosted at a public URL.

**URL-based** — You provide a URL and Lettr fetches the file at send time. Use this when files are already hosted (e.g., in S3, R2, or your CDN). This keeps your API request payload small and avoids encoding overhead.

```javascript
// Base64: for dynamically generated files
attachments: [{ filename: 'invoice.pdf', content: base64String, contentType: 'application/pdf' }]

// URL: for hosted files
attachments: [{ filename: 'report.pdf', url: 'https://files.example.com/report.pdf' }]
```

## Error Handling

When an attachment exceeds limits or a URL fetch fails, the API returns an error and the email is not sent:

```json
// Attachment too large
{
  "success": false,
  "error": {
    "code": "attachment_too_large",
    "message": "Attachment 'backup.zip' exceeds the 25 MB limit."
  }
}

// Total email size exceeded
{
  "success": false,
  "error": {
    "code": "email_too_large",
    "message": "Total email size exceeds the 30 MB limit."
  }
}

// URL fetch failed
{
  "success": false,
  "error": {
    "code": "attachment_fetch_failed",
    "message": "Failed to fetch attachment from URL: https://example.com/file.pdf"
  }
}
```

<Tip>
  Validate file sizes before calling the API to avoid failed sends. For URL-based attachments, ensure the URL is publicly accessible and returns a response within 30 seconds.
</Tip>

## Common MIME Types

| Extension | MIME Type |
|-----------|-----------|
| `.pdf` | `application/pdf` |
| `.doc` | `application/msword` |
| `.docx` | `application/vnd.openxmlformats-officedocument.wordprocessingml.document` |
| `.xls` | `application/vnd.ms-excel` |
| `.xlsx` | `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet` |
| `.png` | `image/png` |
| `.jpg` | `image/jpeg` |
| `.gif` | `image/gif` |
| `.zip` | `application/zip` |
| `.csv` | `text/csv` |

