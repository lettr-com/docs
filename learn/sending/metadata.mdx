---
title: Metadata
description: "Add custom metadata to track and organize emails"
---

Metadata lets you attach arbitrary key-value pairs to any email you send through Lettr. These pairs travel with the email through the entire delivery lifecycle — appearing in webhook payloads, API query results, and the dashboard — so you can correlate emails with your application's data model. Common uses include linking emails to orders, customers, support tickets, or internal request IDs for debugging.

## Adding Metadata

Include a `metadata` object in your send request. Values can be strings, numbers, or booleans:

```javascript
await lettr.emails.send({
  from: 'you@example.com',
  to: ['recipient@example.com'],
  subject: 'Order Confirmation',
  html: '<p>Your order is confirmed!</p>',
  metadata: {
    orderId: 'order_12345',
    customerId: 'cust_67890',
    orderTotal: 99.99,
    source: 'checkout'
  }
});
```

## Metadata in Webhooks

When Lettr delivers a webhook event for an email that carries metadata, the full metadata object is included in the payload. This means your webhook handler can read the same keys you attached at send time and use them to look up the relevant order, customer, or transaction in your database without making additional API calls.

```json
{
  "type": "email.delivered",
  "data": {
    "emailId": "email_abc123",
    "to": "recipient@example.com",
    "metadata": {
      "orderId": "order_12345",
      "customerId": "cust_67890",
      "orderTotal": 99.99,
      "source": "checkout"
    }
  }
}
```

## Query by Metadata

You can filter your email history by metadata values, which is useful for finding all emails related to a specific order, customer, or campaign. Pass a `metadata` object to the list endpoint and Lettr returns only emails whose metadata matches:

```javascript
const emails = await lettr.emails.list({
  metadata: {
    orderId: 'order_12345'
  }
});
```

## Use Cases

<CardGroup cols={2}>
  <Card title="Order Tracking" icon="box">
    Link emails to orders for support and auditing.
  </Card>
  <Card title="User Attribution" icon="user">
    Track which user triggered each email.
  </Card>
  <Card title="Analytics" icon="chart-line">
    Segment email performance by custom dimensions.
  </Card>
  <Card title="Debugging" icon="bug">
    Include request IDs for easier troubleshooting.
  </Card>
</CardGroup>

## Metadata vs Tags

Lettr supports both metadata and tags on emails. They serve different purposes: metadata stores structured key-value data for detailed tracking, while tags are simple string labels for broad categorization.

| Feature | Metadata | Tags |
|---------|----------|------|
| Structure | Key-value pairs | Array of strings |
| Values | Strings, numbers, booleans | Strings only |
| Query support | Query by specific values | Filter by tag presence |
| Best for | Detailed tracking data (order IDs, customer IDs, amounts) | Categorization (transactional, marketing, region) |

## Example: Full Tracking Setup

```javascript
await lettr.emails.send({
  from: 'orders@example.com',
  to: ['customer@example.com'],
  subject: 'Order #12345 Confirmed',
  html: orderConfirmationHtml,
  
  // Tags for categorization
  tags: ['transactional', 'order-confirmation', 'us-region'],
  
  // Metadata for detailed tracking
  metadata: {
    orderId: 'order_12345',
    customerId: 'cust_67890',
    orderTotal: 299.99,
    currency: 'USD',
    itemCount: 3,
    shippingMethod: 'express',
    requestId: 'req_xyz789'
  }
});
```

## Limits

| Limit | Value |
|-------|-------|
| Max keys | 50 |
| Max key length | 40 characters |
| Max value length | 500 characters |
| Max total size | 8 KB |

<Warning>
  Don't store sensitive information (passwords, API keys, PII) in metadata. Metadata is visible in the dashboard and webhook payloads.
</Warning>

